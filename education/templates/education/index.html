{% extends 'base.html' %}

{% block title %}Education Dashboard{% endblock %}
{% block content %}
{% load static %}
<link rel="stylesheet" href="{% static 'education/css/styles.css' %}">

<input type="hidden" name="csrf" id="csrf" value="{{ csrf_token }}">
<div class="dashboard">
    {% comment %} 카테고리 선택 페이지 {% endcomment %}
    <div id="category-selection" class="section category-section">
        <h3 class="menu-header">카테고리를 선택하세요:</h3>
        <div class="category-buttons">
            <button class="category-button" onclick="selectCategory('모바일 > 부가서비스')">부가서비스</button>
            <button class="category-button" onclick="selectCategory('모바일 > 서비스정책')">서비스정책</button>
            <button class="category-button" onclick="selectCategory('모바일 > 요금관련')">요금관련</button>
        </div>
    </div>
    {% comment %} 챗봇 입력/출력 {% endcomment %}
    <div class="section chat-section">
        <div class="chat-header">
            <span>선택된 카테고리: </span><span id="selected-category"></span>
        </div>
        <div class="chat-container">
            <div id="chat-content" class="chat-box" style="white-space: pre-line;"></div>
            <form id="chat-form" action="/education/" method="post" onsubmit="sendMessage(event)">
                {% csrf_token %}
                <div class="input-container">
                    <textarea id="question" name="message" placeholder="message..." oninput="autoResize.call(this)"></textarea>
                    <button id="text-button" type="submit">Send</button>
                </div>
            </form>
            <div class="button-container">
                <button id="start-button" class="mic-button" onclick="startEducation()">
                    <i class="fas fa-microphone"></i> 마이크 연결
                </button>
                <button id="stop-button" class="mic-button" onclick="stopEducation()" disabled>
                    <i class="fas fa-microphone-slash"></i> 마이크 연결 끊기
                </button>
            </div>
        </div>
    </div>

    {% comment %} 읽기 전용 {% endcomment %}
    <div class="section chat-section-readonly">
        <div class="chat-header">평가 봇</div>
        <div class="chat-container">
            <div id="readonly-chat-content" class="chat-box" style="white-space: pre-line;"></div>
        </div>
    </div>
</div>
<div class="submit-container">
    <button type="button" class="submit-button" onclick="saveChatData()">저장</button>
</div>

<script src="{% static 'education/js/scripts.js' %}"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script> -->
{% endblock %}